   
### 任务梳理


### 判断任务是否激活


**任务梳理**

```text
-- 变量 --
重试次数=3（默认为3）

-- 逻辑 --
IF 判断任务列表第一项是否领取了任务：（代表已经激活）点击任务栏
ELIF 从活动页领取任务，没有参，领取任务，关闭窗口
ELIF 从活动页领取任务，有参与，点击任务栏 
需要重试3次
   
看见对话框，但没有点击活点击失败，然后再点击任务列表页导致领取任务失败
点击参与有很大的失败率
```


### 激活后的流程

```text

-- 变量 --

-- 逻辑 --
是否使用道具：
   是否刺杀，点击使用道具、依次并按技能键（加血、和5个技能键）[参数：刺杀时间]，完成后判断是否完成没完成点击完成点击任务栏
   其他道具，睡（道具使用耗时）
是否有npc对话框：点击
底层npc文案：点击
是否任务失败：（任务栏标记是失败，点击一下，会弹出放弃页面），
    所以直接监控是否有放弃页面出现即可，出现点击放弃任务,睡
    打开右侧工具栏，点击帮会按钮，点击回到帮会，点击关闭帮会主页面
    回到帮会后会自动寻路到战龙（调用激活流程应该也没有问题）
    
是否最后的任务-劲敌：直接打，并按技能键（加血、和5个技能键）
        每技能放出后都要判断是否出了副本，出了退出
是否最后的任务-求生：需要规范跑的路线，通过绕圆转圈，但要注意走路节奏。
        每一步都要判断是否出了副本，出了退出
是否完成：
    无论中间有无失败任务，完成5次都会弹出，但有一个反应时间（需注意） 
点击任务栏
在调用激活流程（点击任务栏后等一会，留一定反应时间，用来可能得弹出”放弃任务“

```

### 任务梳理

```text
状态={state:,timeout：}
------------------------------------- 状态信息  ---------------------------------------------------
0-未激活,不包括：所有

10-还未领取任务:  npc多选框_top1按钮 
11-领取任务中:  npc对话框（底部）
12-领取任务成功： 

20-任务执行失败
21-成功放弃任务

99-任务执行完成退出任务

状态（20,21），进入超时判断，修改状态
  超时，status=12
-------------------------------------------------------------------------------------------------


status=0
取消挂机
屏蔽操作前的干扰：npc对话框（底部）、关闭活动页面、关闭玩家商城页面、关闭npc商城页面、关闭各类通知页面
status in (0, 10,12) and 激活逻辑：打开活动页面、查找“活动参与按钮”、点击按钮、关闭活动页面、status = 10 OR (status = 12 AND 点击 “任务列表首列”)
while ture :
   image = 截图操作
   超时判断
   status in (10,12)  AND 匹配到npc多选框： 点击"npc多选框_top1按钮" 、if status == 10 : status = 11、退出当前循环；
   status in (0,11,12)  AND 匹配到npc对话框（底部）： 循环点击npc对话框（底部）、 if status == 11 : status = 12、点击 “任务列表首列”、退出当前循环；
   status in (12)     AND 匹配到刺杀道具：点击使用道具、 等待5秒激活道具、执行刺杀逻辑
   status in (12)     AND 匹配到最终战龙-劲敌 ：点击使用道具、 等待5秒激活道具、等待过图、执行劲敌流程
   status in (12)     AND 匹配到最终战龙-求生 ：点击使用道具、 等待5秒激活道具、等待过图、执行求生流程
   status in (12)     AND 匹配到npc多选框道具：点击使用道具、 等待5秒激活道具
   status in (12) AND 非副本 AND 匹配到失败标识： 弹出放弃弹框 、status = 20、退出当前循环；
   status in (20) : 点击放弃任务、if status == 20 : status = 21、退出当前循环；
   status in (21) : 点击回到帮会、if status == 21 : status = 10、退出当前循环；
   
   status in (12) AND 严格匹配“任务列表首列”是否为战龙任务： 点击 “任务列表首列”、退出当前循环；
     else if : 执行激活逻辑
   
   


  
```