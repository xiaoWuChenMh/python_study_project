
   
### 任务梳理

 当任务启动时，有两个主要的执行流程：1判断任务是否激活，2激活后的执行流程。

 通过循环嵌套的方式组织两个流程，即先判断是否激活，如果激活就执行后续流程。


### 判断任务是否激活


**任务梳理**

```text
-- 变量 --
重试次数=3（默认为3）

-- 逻辑 --
重新点击跟随
判断任务列表第一项是否领取了任务：（代表已经激活）点击任务栏
从活动页领取任务
需要重试3次
   
```


### 激活后的流程

```text

-- 变量 --
执行总轮数（向上取整） = 执行次数/5  (5次为一轮)
当前执行次数=0
当前执行轮数=0
卡图阈值=0
副本标识=0
is_sleep = True

-- 逻辑 --
 npc对话框: 点击、睡（反应）、卡图阈值+=1、副本标识=0、is_sleep = True
 npc的speak text: 点击、睡（反应）
 任务栏：点击、睡（反应）、取消挂机
 继续标识：点击、睡（过图）、卡图阈值=0、当前执行轮数+1
 副本标识：卡图阈值=0、副本标识+=1
    if 副本标识>0 and is_sleep:
       睡（副本最小执行时间秒-3）
       当前执行次数+=1
       is_sleep = False
       点击挂机
    else 取消挂机
 判断卡图阈值：重新点击跟随、卡图阈值 = 0、睡（反应*3）


卡图：
   某个队员在其他线（取消并点击跟随能解决）
   全员不再正确的线，只能多次点击任务栏
   
副本标识：
   可能失败，因此当卡图阈值超过一定次数后，切换为匹配地图名
   
副本名：蒲家村角落、金銮殿、蛙鸣池
 
```

```text
战龙和一条龙都带龙字，尤其是一条龙有的时候只能文字识别出龙，因此在文字识别时需要证据非某些文字的功能
```
   

