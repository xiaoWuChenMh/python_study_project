
### 任务梳理

```text
状态={state:,timeout：}
status_start(状态的定时起始时间点）

   
激活逻辑(没领取，已领取）
   if 是否打开活动页面 or 打开活动页面：
       找到任务按钮并点击
       点击了“参与按钮”，状态=4、timing_start else 状态=1
       True
   else:
       False
  
激活后流程
  使用道具（睡）
  npc商店（确定-睡-关闭-睡）
  玩家商店-搜索
  玩家商店（确定-睡-再次确定-睡-关闭-睡）
  提交装备-首次-点击购买：状态=2、timing_start
  提交装备-再次-提交：状态=1
  提交装备-确认提交：非必须的，蓝装以上才会有
  --------- npc文本点击 and 重新激活 and 点击任务列表 --- 必须这样排列并放到最后，防止触发额外的点击（点击活动页面）时将其他页面标识取消掉（npc对话框）------------------
  npc文本点击
  是否需要重新激活
      if 没找到师门（文字判断识别率低 【TODO 截图面积加大，文字加上一些任务标题的关键字！！！】）:
         点击活动按钮（防止游戏页面中置顶了npc对话框等干扰元素
         调用激活逻辑
  点击对话框
       if 状态==2 ：状态=3、timing_start
       if 状态==4 ：状态=1
  点击任务列表(有任务栏才点击）
  超时判断（非0），修改状态
    1-change-0
    更新记时间
  查是否需要退出任务执行流程:break
```
### 状态说明

```text
0-未激活,不包括：所有
1-正常流程，不包括：提交装备-再次-提交
2-进入装备提交购买节点，包括：点击对话框（60秒未改变状态，状态改为0）
3-进入装备再次提交节点，包括：点击任务+提交装备-再次+npc商店 (默认60秒未改变状态，状态改为0）+点击对话框
4-初次领取任务和完成10次后再次领取任务: 点击对话框


状态（2,3，4），进入超时判断，修改状态
  超时，2-change-1 
  超时，3-change-1 
  超时，4-change-0
  
```

### 排除影响因素

```text
杭州铁匠铺的装备引导任务都做完了，否则”师门-寻物-武器“触发购买装备时，等游戏角色从铁匠铺购买装备时会判断失误，直接进入引导任务。
  
```


### 问题

```text
1、有时会不稳定，多个窗口跑时，会激活失败
3、周末的一世和妖兽等会导致任务栏下移，还未解决
4、小概率事件，会点击到活动页面最上面的那一栏”倩女初闻录“
  
```